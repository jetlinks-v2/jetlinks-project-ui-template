import{inject as x}from"vue";var fe=(o=Symbol(),t)=>x(o,t||{});import{ref as h}from"vue";import{useRouter as w,onBeforeRouteLeave as T}from"vue-router";var m={},de=(o,t)=>{m={code:o,value:t}},ye=()=>{let o=h({}),e=w().currentRoute.value.name;o.value=m.code===e?m.value:{};let n=()=>{m.code===e&&(m={})};return T(()=>{n()}),{params:o,clear:n}};import*as f from"echarts/core";import{BarChart as g,LineChart as S,PieChart as b,MapChart as L,PictorialBarChart as E,RadarChart as O,ScatterChart as U}from"echarts/charts";import{TitleComponent as k,TooltipComponent as z,GridComponent as M,PolarComponent as V,AriaComponent as A,ParallelComponent as I,LegendComponent as N,RadarComponent as j,ToolboxComponent as B,DataZoomComponent as D,VisualMapComponent as _,TimelineComponent as q,CalendarComponent as G,GraphicComponent as H}from"echarts/components";import{LabelLayout as K,UniversalTransition as W}from"echarts/features";import{CanvasRenderer as F}from"echarts/renderers";f.use([N,k,z,M,V,A,I,g,S,b,L,O,E,j,B,D,_,q,G,H,U,K,W,F]);var u=f;import{onMounted as Z,onUnmounted as J,unref as c}from"vue";var Se=o=>{let t=null;function e(){let i=c(o);i&&(t=u.init(i))}function n(i){t||e(),t&&t.setOption(i)}let r=()=>{t?.resize?.()};function a(){let i=new ResizeObserver(()=>r());o&&i.observe(c(o))}return Z(()=>{window.addEventListener("resize",r),a()}),J(()=>{window.removeEventListener("resize",r)}),{setOptions:n}};import{ref as Q,onMounted as X,onUnmounted as Y}from"vue";var Ee=o=>{let t=Q(!0),e=navigator,n=e.connection||e.webkitConnection||e.mozConnection,r=n.downlink,a=()=>{r!==e.connection.downlink||e.connection.rtt===0?(t.value=!1,o?.offline?.()):(r===e.connection.downlink||e.connection.rtt!==0)&&(t.value=!0,o?.onLine?.())};return X(()=>{n&&n.addEventListener("change",a)}),Y(()=>{n&&n.removeEventListener("change",a)}),{isOnline:t}};import{inject as $}from"vue";import{ComponentsEnum as ee}from"@jetlinks-web/constants";var ze=()=>$(ee.Icon,{});import{watch as oe,ref as ne,inject as te,provide as re}from"vue";import{isBoolean as ae}from"lodash-es";import{ComponentsEnum as l}from"@jetlinks-web/constants";var Ne=o=>{let t=ne(!1),{hasPermission:e}=te(l.Permission,{});return oe(()=>o.value,n=>{n!==void 0&&(t.value=ae(n)?n:e?.(n)??!1)},{immediate:!0}),{hasPerm:t}},je=o=>{re(l.Permission,o)};import{onUnmounted as ie,ref as d}from"vue";import{isFunction as y,get as se,isArray as me}from"lodash-es";var R={immediate:!0,formatName:"result"},qe=(o,t=R)=>{let e={...R,...t},n=d(!1),r=d(e.defaultValue);function a(...v){return new Promise(async(C,p)=>{if(o&&y(o)){n.value=!0;try{let s=await o.apply(this,v);if(n.value=!1,s?.success){let P=await e.onSuccess?.(s);r.value=P??se(s,e.formatName),C(r.value)}else e.onError?.(s),p(s)}catch(s){console.warn(s),p(s),n.value=!1,e.onWarn?.(s)}}else p("request is not a function")})}function i(){e.defaultParams?me(e.defaultParams)?a(...e.defaultParams):a(e.defaultParams):a()}return e.immediate&&i(),ie(()=>{o&&y(o)}),{data:r,loading:n,run:a,reload:i}};export{de as setParamsValue,fe as useContext,Se as useECharts,ze as useIcon,Ee as useNetwork,Ne as usePermission,je as usePermissionContext,qe as useRequest,ye as useRouterParams};
